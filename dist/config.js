'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _yargs=require('yargs');var _path=require('path');var _path2=_interopRequireDefault(_path);var _util=require('./util');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var parameters=require(_path2.default.resolve(_yargs.argv.parameters)).default;var specialArgv={};_yargs.argv._.forEach(function(arg){if(arg.indexOf(':')>0){var argArr=arg.split(':');specialArgv[argArr[0]]=argArr[1];}});var port=specialArgv.port||3030;var debugMode=!!_yargs.argv.debugMode;var rootDir=_path2.default.resolve('./');var globalAssetsDir=_path2.default.resolve(rootDir,parameters.paths.globalAssets);var libsDir=_path2.default.resolve(rootDir,parameters.paths.libs);var bundlesDir=_path2.default.resolve(rootDir,parameters.paths.bundles);var nodeModulesDir=_path2.default.resolve(rootDir,'node_modules');var assetsSrcDirs=[globalAssetsDir];var bundleEntry={};parameters.bundles.forEach(function(bundle){var bundleAssetsDir=bundlesDir+'/'+bundle+'/Resources/assets';var bundleName=bundle.replace('Bundle','').toLowerCase();bundleEntry[bundleName]={};bundleEntry[bundleName][bundleName]=bundleAssetsDir+'/'+bundleName+'.js';Object.assign(bundleEntry[bundleName],(0,_util.searchEntries)(bundleAssetsDir+'/js',bundleName+'/'));assetsSrcDirs.push(bundleAssetsDir);});var libEntry={};var libEntryPrefix='libs/';var _loop=function _loop(key){libEntry[''+libEntryPrefix+key]=[];parameters.libs[key].forEach(function(le){if(le.indexOf('.js')>0){libEntry[''+libEntryPrefix+key].push(_path2.default.resolve(libsDir,le));}else{libEntry[''+libEntryPrefix+key].push(le);}});};for(var key in parameters.libs){_loop(key);}var config={__DEBUG__:debugMode,__DEV__:process.env.NODE_ENV==='development',__DEV_SERVER_PORT__:port,assetsSrcDirs:assetsSrcDirs,libsDir:libsDir,nodeModulesDir:nodeModulesDir,bundleEntry:bundleEntry,libEntry:libEntry,output:{path:_path2.default.resolve(rootDir,parameters.paths.output),publicPath:parameters.paths.publicPath},noParseDeps:parameters.noParseDeps||[],happypack:{tempDir:parameters.paths.happypackTempDir||_path2.default.resolve(rootDir,'.happypack/')}};exports.default=config;